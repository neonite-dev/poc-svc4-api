import{bs as m,h as a,ap as d}from"./index.js";const h=async e=>{const{data:s}=await m.post("/api/extra/common/menuList",{userId:e});return s.value};function g(e,s){const u=[];return e==null||e.forEach(i=>{if((i==null?void 0:i.upperMenuId)==(s==null?void 0:s.toString())){const o=g(e,i.menuId),t=e.findIndex(f=>f.upperMenuId==i.menuId.toString())>-1,r={key:i.menuId,label:i.menuName,data:i.cls,icon:N(i,t),isExpand:t,type:t?"folder":"url",sort:i.sort,children:[]};o.length&&(r.children=o),u.push(r)}}),l("children")(w("sort"))(u)}function N(e,s){let u="pi pi-fw pi-file";if(s&&e){if(u="pi pi-fw pi-folder",[1e5,100001,100002,100003].includes(e.menuId))return"pi pi-fw pi-home";if(["관리"].includes(e.menuName.slice(-2)))return"pi pi-fw pi-cog";if(["자료"].includes(e.menuName.slice(-2))||["자료실"].includes(e.menuName.slice(-3)))return"pi pi-fw pi-save";if(["팀","실"].includes(e.menuName.slice(-1))||["사업부"].includes(e.menuName.slice(-3)))return"pi pi-fw pi-sitemap";if(["요청"].includes(e.menuName.slice(-2)))return"pi pi-fw pi-send";if(["상담","녹취"].includes(e.menuName.slice(-2))||["상담"].includes(e.menuName.substring(0,2))||["초등상담"].includes(e.menuName.substring(0,4)))return"pi pi-fw pi-whatsapp";if(["쪽지","톡쌤"].includes(e.menuName.slice(-2)))return"pi pi-fw pi-comments";if(["장애","오류"].includes(e.menuName.slice(-2))||["장애"].includes(e.menuName.substring(0,2)))return"pi pi-fw pi-exclamation-triangle";if(["공통"].includes(e.menuName.substring(0,2)))return"pi pi-fw pi-globe"}return u}function p(e,s,u){return(e==null?void 0:e.length)>0&&(e.filter(n=>n.upperMenuId==null).forEach(n=>{n.upperMenuId=s.toString()}),e.push({menuId:s,menuName:u,upperMenuId:void 0,use_Yn:"",type:"",sort:0,cls:e[0].cls})),e}const w=(e,s="asc")=>u=>[...u].sort(({[e]:n},{[e]:c})=>(s=="asc"?1:-1)*(n<c?-1:n>c?1:0)),l=e=>s=>u=>s([...u]).map(({[e]:n,...c})=>({...c,[e]:l(e)(s)(n)})),M=a({id:"menu",state:()=>({menus:[],currentMenu:{}}),getters:{currentClass:e=>e.currentMenu.cls},actions:{async getMenus(){const{user:e,logout:s}=d();if(!e){s();return}const u=[];if(e!=null&&e.userId&&(e==null?void 0:e.userId)!=""){const n=await h(e==null?void 0:e.userId),c=p(n==null?void 0:n.filter(r=>r.cls==="G"),1e5,"공통"),i=p(n==null?void 0:n.filter(r=>r.cls==="K"),100001,"유아"),o=p(n==null?void 0:n.filter(r=>r.cls==="E"),100002,"초등"),t=p(n==null?void 0:n.filter(r=>r.cls==="M"),100003,"중ㆍ고등");u.push(...c,...o,...i,...t)}this.menus=u},setCurrentMenu(e){var s;this.$state.menus.length>0&&(this.currentMenu=(s=this.$state.menus)==null?void 0:s.find(u=>u.menuId==e))}}});export{g as b,M as u};

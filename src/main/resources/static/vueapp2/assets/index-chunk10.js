import{d as ce,b1 as de,ag as ie,aa as f,b2 as I,ab as u,be as me,bf as fe,_ as pe,q as _e,o as v,u as V,a,w as n,V as b,g as p,b as _,t as c,e as h,f as C,ah as ve,F as x,v as U,n as be,bg as Ce,c as H,p as ge,l as ye,aT as Be,aG as he,bh as we,bi as Ie}from"./index.js";import{B as Ve}from"./index-chunk18.js";import{a as Se,i as De,b as Le,c as Me,U as xe,d as ke}from"./index-chunk20.js";import{u as Ne}from"./index-chunk17.js";const Te=ce({__name:"BoardView",setup(g,{expose:w}){w();const s=de(),r=Ne(),{menus:y,currentMenu:d}=ie(r),B=f({title:""}),o=f([]),{query:Y}=s,S=I({boardId:s.params.boardId.toString()||"",userId:"monique"}),G=u(()=>{var e,t;return((e=y.value)==null?void 0:e.length)>0&&((t=d.value)!=null&&t.menuName)&&(B.value.title=d.value.menuName),B.value.title});function J(e){const t=new Date(e),l=t.getFullYear(),m=t.getMonth()+1,ne=t.getDate(),z=t.getHours(),re=t.getMinutes(),oe=t.getSeconds(),se=z>=12?"오후":"오전",le=`${l}-${m.toString().padStart(2,"0")}-${ne.toString().padStart(2,"0")}`,ue=`${se} ${z%12||12}:${re.toString().padStart(2,"0")}:${oe.toString().padStart(2,"0")}`;return`${le} ${ue}`}const K=u(()=>{var e,t,l;if(o.value=[].concat([]),((e=y.value)==null?void 0:e.length)>0&&((t=d.value)==null?void 0:t.menuName)!=null){const m={title:(l=d.value)==null?void 0:l.menuName,disabled:!0,href:"#"};o.value.unshift(m),D(y.value,d.value)}return o.value}),D=(e,t)=>{if(t!=null&&t.upperMenuId){const l=e==null?void 0:e.find(m=>m.menuId.toString()==(t==null?void 0:t.upperMenuId));if(l){const m={title:l.menuName,disabled:!1,to:`/board/${t.menuId}`};o.value.unshift(m),D(e,l)}}return null},i=f([]),k=f([]),N=f([]),T=f(""),L=f(!1),F=async()=>{var e;try{const t=await Se(S);((e=t.value)==null?void 0:e.length)>0&&(i.value=[...t.value])}catch(t){console.error(t)}},j=async()=>{try{await De(S)}catch(e){console.error(e)}},R=I({boardId:s.params.boardId.toString(),reader:"monique"}),P=I({boardId:s.params.boardId.toString(),writer:"monique",content:T}),q=I({boardId:s.params.boardId.toString(),userId:"monique"}),A=async()=>{var e;try{const t=await Le(R);((e=t.value)==null?void 0:e.length)>0&&(k.value=[...t.value])}catch(t){console.error(t)}},M=async()=>{var e;try{const t=await Me(q);((e=t.value)==null?void 0:e.length)>0&&(N.value=[...t.value])}catch(t){console.error(t)}},Q=u(()=>{var e;return(e=i.value[0])==null?void 0:e.title}),W=u(()=>{var e;return(e=i.value[0])==null?void 0:e.num}),X=u(()=>{var e;return(e=i.value[0])==null?void 0:e.regDate}),Z=u(()=>{var e;return(e=i.value[0])==null?void 0:e.content}),$=u(()=>{var e;return(e=i.value[0])==null?void 0:e.writer}),ee=u(()=>s.params.menuId);function te(){L.value=!L.value}const ae=async()=>{try{(await ke(P)).value.success?(alert("댓글이 등록되었습니다."),M()):alert("댓글 등록에 실패했습니다!")}catch(e){console.error(e),alert("댓글 등록에 실패했습니다.")}};me(()=>{F(),j(),A(),M()});const E={route:s,menuStore:r,menus:y,currentMenu:d,pageMeta:B,breadcrumbs:o,query:Y,boardViewParam:S,pageMetaByMenuId:G,convertDateFormat:J,breadcrumbsByMenuId:K,recursiveReverseItem:D,items:i,readerList:k,cmtList:N,txt:T,readerOpenYN:L,boardView:F,updateReadCnt:j,readerParam:R,cmtParam:P,cmtListParam:q,readerLists:A,getComments:M,title:Q,num:W,regDate:X,content:Z,writer:$,menuId:ee,openReaderList:te,addComment:ae,BaseBreadcrumb:Ve,UiEmptyTitleCard:xe,get PrinterIcon(){return fe}};return Object.defineProperty(E,"__isScriptSetup",{enumerable:!1,value:!0}),E}}),O=g=>(we("data-v-3cb03f49"),g=g(),Ie(),g),Fe=["innerHTML"],je=O(()=>_("div",{class:"rowLine2"},null,-1)),Re=O(()=>_("div",{class:"rowLine2"},null,-1)),Pe={key:0};function qe(g,w,s,r,y,d){const B=_e("router-link");return v(),V(x,null,[a(r.BaseBreadcrumb,{title:r.pageMetaByMenuId,breadcrumbs:r.breadcrumbsByMenuId},null,8,["title","breadcrumbs"]),a(r.UiEmptyTitleCard,null,{default:n(()=>[a(b,{justify:"center",class:"justify-space-between mb-3 rowLine"},{default:n(()=>[a(p,null,{default:n(()=>[_("h2",null,c(r.num)+". "+c(r.title),1),_("p",null,c(r.convertDateFormat(r.regDate))+" - ("+c(r.writer)+")",1)]),_:1}),a(p,{cols:"auto",class:"text-right"},{default:n(()=>[a(h,{size:"small",class:"mr-2",icon:r.PrinterIcon},null,8,["icon"]),a(h,{size:"small",color:"secondary",class:"mr-2"},{default:n(()=>[C("답변하기")]),_:1}),a(B,{to:{path:`/board/${r.query.menuId}`}},{default:n(()=>[a(h,{size:"small",color:"primary",class:"mr-2"},{default:n(()=>[C("목록")]),_:1})]),_:1},8,["to"]),a(h,{size:"small",color:"error",class:"mr-2"},{default:n(()=>[C("삭제")]),_:1})]),_:1})]),_:1}),a(b,{justify:"space-around"},{default:n(()=>[a(p,{cols:"8",class:"contentMargin"},{default:n(()=>[_("div",{innerHTML:r.content},null,8,Fe)]),_:1})]),_:1}),je,a(b,{justify:"space-around"},{default:n(()=>[a(p,{cols:"8"},{default:n(()=>[a(h,{size:"small",color:"primary",class:"mr-2",onClick:r.openReaderList},{default:n(()=>[C("열람자 안내")]),_:1})]),_:1})]),_:1}),Re,a(b,{justify:"space-around"},{default:n(()=>[a(p,{cols:"8"},{default:n(()=>[r.readerOpenYN?(v(),V("div",Pe,[a(ve,null,{default:n(()=>[(v(!0),V(x,null,U(r.readerList,o=>(v(),H(ge,{class:"list-item",key:o.boardId},{default:n(()=>[a(ye,{style:{"font-size":"14px","margin-block-end":"5px"}},{default:n(()=>[C(c(o.reader)+" 님께서 "+c(r.convertDateFormat(o.readTime))+" 에 최초 열람하셨습니다 -- 열람 횟수 "+c(o.readCount),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})])):be("",!0)]),_:1})]),_:1}),a(b,{justify:"center",dense:""},{default:n(()=>[(v(!0),V(x,null,U(r.cmtList,o=>(v(),H(p,{cols:"8",key:o.replyId},{default:n(()=>[a(Be,{"append-icon":"mdi-delete","prepend-icon":"mdi-account",subtitle:o.writer_Name+"("+o.writer+")"},{default:n(()=>[a(he,null,{default:n(()=>[C(c(o.content),1)]),_:2},1024)]),_:2},1032,["subtitle"])]),_:2},1024))),128))]),_:1}),a(b,{justify:"space-around"},{default:n(()=>[a(p,{cols:"8"},{default:n(()=>[_("div",null,[_("span",null,[a(Ce,{"append-icon":"mdi-check",modelValue:r.txt,"onUpdate:modelValue":w[0]||(w[0]=o=>r.txt=o),label:"댓글",density:"compact",rows:"2","onClick:append":r.addComment},null,8,["modelValue"])])])]),_:1})]),_:1})]),_:1})],64)}const He=pe(Te,[["render",qe],["__scopeId","data-v-3cb03f49"],["__file","C:/_project_svc4/java/poc-svc4-api/frontend/vue-dashboard/src/views/pages/sample/BoardView.vue"]]);export{He as default};
